(this["webpackJsonpweather-exercize"]=this["webpackJsonpweather-exercize"]||[]).push([[0],{141:function(e,t,a){e.exports=a(308)},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},291:function(e,t,a){},292:function(e,t,a){},293:function(e,t,a){},294:function(e,t,a){},296:function(e,t,a){},297:function(e,t,a){},298:function(e,t,a){},308:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(5),l=a.n(r),i=(a(146),a(147),a(43)),o=a(8),u=a(312),s=a(313),m=a(3),b=(a(148),Object(m.block)("container")),d=function(e){var t=e.children;return c.a.createElement("div",{className:b()},t)},v=a(32),p=a(68),f=(a(149),Object(m.block)("text-input")),O=function(e){var t=e.className,a=void 0===t?"":t,n=e.name,r=Object(v.a)(e,["className","name"]),l=Object(p.b)(n),i=l.input,o=l.meta,u=o.touched,s=o.error,m=o.submitError,b=s||m;return c.a.createElement(c.a.Fragment,null,c.a.createElement("input",Object.assign({},i,r,{name:n,className:f.mix(a)})),c.a.createElement("div",{className:f("error")},u&&b))},E=(a(150),Object(m.block)("button")),j=function(e){var t=e.type,a=void 0===t?"button":t,n=e.className,r=void 0===n?"":n,l=e.children,i=e.disabled,o=void 0!==i&&i,u=Object(v.a)(e,["type","className","children","disabled"]);return c.a.createElement("button",Object.assign({className:E({disabled:o}).mix(r),type:a},u),l)},h=(a(151),Object(m.block)("custom-input")),k=function(e){var t=e.name,a=e.type,n=void 0===a?"text":a,r=e.className,l=void 0===r?"":r,i=Object(v.a)(e,["name","type","className"]);return c.a.createElement("input",Object.assign({name:t,id:t,type:n},i,{className:h.mix(l)}))},g=(a(152),Object(m.block)("custom-table")),N=function(e){var t=e.className,a=void 0===t?"":t,n=e.children;return c.a.createElement("table",{className:g.mix(a)},n)},y=(a(153),Object(m.block)("custom-table-head")),C=function(e){var t=e.className,a=void 0===t?"":t,n=e.children;return c.a.createElement("thead",{className:y.mix(a)},c.a.createElement("tr",null,n))},x=(a(154),Object(m.block)("custom-table-head-cell")),w=function(e){var t=e.className,a=void 0===t?"":t,n=e.children;return c.a.createElement("th",{className:x.mix(a),scope:"col"},n)},I=function(e){var t=e.className,a=void 0===t?"":t,n=e.children;return c.a.createElement("tbody",{className:a},n)},S=(a(155),Object(m.block)("custom-table-row")),D=function(e){var t=e.className,a=void 0===t?"":t,n=e.onClick,r=e.children;return c.a.createElement("tr",{className:S.mix(a),onClick:n},r)},P=(a(156),Object(m.block)("custom-table-body-cell")),T=function(e){var t=e.className,a=void 0===t?"":t,n=e.children;return c.a.createElement("td",{className:P.mix(a)},n)},_=(a(157),Object(m.block)("custom-tabs")),M=function(e){var t=e.children;return c.a.createElement("div",{className:_()},t)},A=(a(158),Object(m.block)("tabs-tail")),Y=function(){return c.a.createElement("div",{className:A()})},B=(a(159),Object(m.block)("custom-tabs-head")),F=function(e){var t=e.children;return c.a.createElement("div",{className:B()},t)},V=a(38),W=a.n(V),L=a(79),U=a.n(L),z=a(9),J=function(e){return Object(z.c)((function(t){return U()(t,e)}))},R=a(28),q=a(311),G=a(310),K=a(51),$=function(e){var t=e.id,a=Object(z.b)(),r=Object(n.useCallback)((function(e){e.stopPropagation(),a(function(e){return{type:"ENABLE_CITY",payload:e}}(t))}),[t,a]);return c.a.createElement(K.a,{onClick:r},"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c")};var H=function(e){var t=e.id,a=e.group,r=e.tab,l=Object(z.b)(),i=Object(n.useCallback)((function(e){e.stopPropagation();var n=function(e,t){var a=e.findIndex((function(e){return e.id===t}));return-1===a||0===a||(e[a].position-=1,e[a-1].position+=1),e}(a,t);l({type:"MOVE_UP",payload:{group:n,tab:r}})}),[l,a,t,r]);return c.a.createElement(K.a,{onClick:i},"\u0412\u0432\u0435\u0440\u0445")};var Q=function(e){var t=e.id,a=e.group,r=e.tab,l=Object(z.b)(),i=Object(n.useCallback)((function(e){e.stopPropagation();var n=function(e,t){var a=e.findIndex((function(e){return e.id===t}));return-1===a||a===e.length-1||(e[a].position+=1,e[a+1].position-=1),e}(a,t);l({type:"MOVE_DOWN",payload:{group:n,tab:r}})}),[l,a,t,r]);return c.a.createElement(K.a,{onClick:i},"\u0412\u043d\u0438\u0437")},X=function(e){var t=e.id,a=e.status,r=e.city,l=Object(v.a)(e,["id","status","city"]),i=Object(z.b)(),o=Object(n.useState)(!1),u=Object(R.a)(o,2),s=u[0],m=u[1],b=Object(n.useCallback)((function(e){e.stopPropagation(),m(!0)}),[]),d=Object(n.useCallback)((function(e){e.stopPropagation(),m(!1)}),[]),p=Object(n.useCallback)((function(e){e.stopPropagation(),i(function(e){return{type:"DISABLE_CITY",payload:e}}(t)),m(!1)}),[t,i]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(q.a,{visible:s,onCancel:d,onOk:p},"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0433\u043e\u0440\u043e\u0434 ".concat(r," ?")),c.a.createElement(G.a,{size:"small"},c.a.createElement(H,Object.assign({id:t},l)),c.a.createElement(Q,Object.assign({id:t},l)),"active"===a?c.a.createElement(K.a,{onClick:b},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"):c.a.createElement($,{id:t})))},Z=a(7);function ee(e){var t={};return e.temperature||(t.temperature="\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"),t}var te=function(e){var t=e.city,a=e.visible,r=e.onClose,l=Object(z.b)(),i=Object(n.useMemo)((function(){var e;return Object(Z.a)({},t,{temperature:null===t||void 0===t||null===(e=t.main)||void 0===e?void 0:e.temp})}),[t]),o=Object(n.useCallback)((function(e){e.main.temp=+e.temperature,delete e.temperature,l({type:"UPDATE_CITY",payload:e}),r()}),[l,r]),u=Object(n.useCallback)((function(e){e.stopPropagation(),r()}),[r]);return c.a.createElement(p.a,{initialValues:i,onSubmit:o,validate:ee,render:function(e){var t=e.handleSubmit;return c.a.createElement(q.a,{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0432\u0440\u0443\u0447\u043d\u0443\u044e",visible:a,onOk:t,onCancel:u},c.a.createElement("form",{onSubmit:t},c.a.createElement(O,{name:"name",readOnly:!0}),c.a.createElement(O,{name:"temperature"})))}})},ae=(a(291),Object(m.block)("cities-table")),ne=function(e){var t=e.group,a=e.tab,r=Object(n.useState)(!1),l=Object(R.a)(r,2),i=l[0],o=l[1],u=Object(n.useState)(null),s=Object(R.a)(u,2),m=s[0],b=s[1],d=Object(n.useCallback)((function(e){b(e),o(!0)}),[]),v=Object(n.useCallback)((function(){o(!1)}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(N,null,c.a.createElement(C,null,c.a.createElement(w,null,"\u0413\u043e\u0440\u043e\u0434"),c.a.createElement(w,null,"\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430"),c.a.createElement(w,null,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f")),c.a.createElement(I,null,t.map((function(e){var n;return c.a.createElement(D,{key:e.id,className:ae("row"),onClick:function(){return d(e)}},c.a.createElement(T,null,c.a.createElement("span",{className:ae("name",{disabled:"deleted"===(null===e||void 0===e?void 0:e.status)})},null===e||void 0===e?void 0:e.name)),c.a.createElement(T,null,c.a.createElement("span",{className:ae("temperature",{disabled:"deleted"===(null===e||void 0===e?void 0:e.status)})},null===e||void 0===e||null===(n=e.main)||void 0===n?void 0:n.temp.toFixed(0),"\xb0C")),c.a.createElement(T,null,c.a.createElement(X,{id:null===e||void 0===e?void 0:e.id,status:null===e||void 0===e?void 0:e.status,city:e.name,group:t,tab:a})))})))),c.a.createElement(te,{city:m,visible:i,onClose:v}))},ce=(a(292),function(){var e=J("cities.all"),t=Object(n.useMemo)((function(){return W()(e,"position")}),[e]);return c.a.createElement(ne,{group:t,tab:"all"})}),re=(a(293),function(){var e=J("cities.active"),t=Object(n.useMemo)((function(){return W()(e,"position")}),[e]);return c.a.createElement(ne,{group:t,tab:"active"})}),le=(a(294),function(){var e=J("cities.deleted"),t=Object(n.useMemo)((function(){return W()(e,"position")}),[e]);return c.a.createElement(ne,{group:t,tab:"deleted"})}),ie=a(85),oe=a.n(ie),ue=a(126);function se(e){return me.apply(this,arguments)}function me(){return(me=Object(ue.a)(oe.a.mark((function e(t){var a;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json().catch((function(){return null}));case 2:if(a=e.sent,!t.ok||!a){e.next=5;break}return e.abrupt("return",a);case 5:if(!(t.status>=500)){e.next=7;break}throw new Error("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435");case 7:if(t.ok||!a){e.next=9;break}throw new Error(a.message);case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(296);var be=Object(m.block)("search-bar"),de=function(){var e=Object(z.b)(),t=Object(n.useState)(!1),a=Object(R.a)(t,2),r=a[0],l=a[1],i=Object(n.useState)(""),o=Object(R.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)(""),b=Object(R.a)(m,2),d=b[0],v=b[1],p=Object(n.useCallback)((function(t){return t.preventDefault(),u?(l(!0),(a=u,fetch("".concat("https://api.openweathermap.org/data/2.5/weather","?q=").concat(a,"&appid=").concat("aa0e19ae7af5197a57dc3e54ecf5e29e","&units=metric")).then(se)).then((function(t){return e({type:"ADD_CITY",payload:t})})).catch((function(e){return v("string"===typeof e?e:e.message)})).finally((function(){l(!1),s("")}))):v("\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c");var a}),[u,e]),f=Object(n.useCallback)((function(e){d&&v(""),s(e.target.value)}),[d]),O=Object(n.useCallback)((function(e){if("Enter"===e.key)return p(e)}),[p]);return c.a.createElement("form",{onSubmit:p},c.a.createElement("div",{className:be()},c.a.createElement(k,{className:be("input"),name:"search",value:u,onChange:f,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0433\u043e\u0440\u043e\u0434\u0430",onKeyDown:O}),c.a.createElement(j,{className:be("button"),type:"submit",disabled:r},"\u0418\u0441\u043a\u0430\u0442\u044c")),!!d&&c.a.createElement("div",{className:be("error")},d))},ve=(a(297),Object(m.block)("application-header")),pe=function(){return c.a.createElement("div",{className:ve()},c.a.createElement(de,null))},fe=(a(298),Object(m.block)("app-content")),Oe=function(e){var t=e.children;return c.a.createElement(c.a.Fragment,null,c.a.createElement(M,null,c.a.createElement(F,null,c.a.createElement(i.b,{exact:!0,to:"/",className:fe("link"),activeClassName:fe("active-link")},"\u0412\u0441\u0435"),c.a.createElement(i.b,{to:"/active",className:fe("link"),activeClassName:fe("active-link")},"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435"),c.a.createElement(i.b,{to:"/deleted",className:fe("link"),activeClassName:fe("active-link")},"\u0423\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0435")),c.a.createElement(Y,null)),t)},Ee=a(17),je=a(127),he=a(93),ke=a(128),ge=a.n(ke),Ne=a(129),ye=a.n(Ne),Ce=a(67),xe=a(29);function we(e,t){return e.reduce((function(e,a,n){return a.id===t?e:[].concat(Object(xe.a)(e),[Object(Z.a)({},a,{position:n+1})])}),[])}function Ie(e,t){return t.map((function(t){return t.id===e.id?Object(Z.a)({},e,{position:t.position}):t}))}var Se={all:[],active:[],deleted:[]};var De=Object(Ee.combineReducers)({cities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0,a=t.payload,n=t.type,c=e.all,r=e.active,l=e.deleted;switch(n){case"ADD_CITY":var i=c.findIndex((function(e){return e.id===(null===a||void 0===a?void 0:a.id)}));return-1!==i?Object(Z.a)({},e,{all:c.map((function(e){return e.id===(null===a||void 0===a?void 0:a.id)?Object(Z.a)({},a,{position:e.position,status:e.status}):e})),active:"active"===(null===a||void 0===a?void 0:a.status)?[].concat(Object(xe.a)(r),[Object(Z.a)({},a,{position:r.length+1})]):r,deleted:"deleted"===(null===a||void 0===a?void 0:a.status)?[].concat(Object(xe.a)(l),[Object(Z.a)({},a,{position:l.length+1})]):l}):Object(Z.a)({},e,{all:[].concat(Object(xe.a)(c),[Object(Z.a)({},a,{position:c.length+1,status:"active"})]),active:[].concat(Object(xe.a)(r),[Object(Z.a)({},a,{position:r.length+1,status:"active"})])});case"DISABLE_CITY":var o=c.findIndex((function(e){return e.id===a}));return-1===o?e:Object(Z.a)({},e,{all:c.map((function(e){return e.id===a?Object(Z.a)({},e,{status:"deleted"}):e})),active:we(r,a),deleted:[].concat(Object(xe.a)(l),[Object(Z.a)({},c[o],{status:"deleted",position:l.length})])});case"ENABLE_CITY":var u=c.findIndex((function(e){return e.id===a}));return-1===u?e:Object(Z.a)({},e,{all:c.map((function(e){return e.id===a?Object(Z.a)({},e,{status:"active"}):e})),active:[].concat(Object(xe.a)(r),[Object(Z.a)({},c[u],{status:"active",position:r.length})]),deleted:we(l,a)});case"MOVE_UP":case"MOVE_DOWN":return Object(Z.a)({},e,Object(Ce.a)({},a.tab,a.group));case"UPDATE_CITY":return Object(Z.a)({},e,{all:Ie(a,c),active:Ie(a,r),deleted:Ie(a,l)});default:return e}}}),Pe={key:"root",storage:ye.a,stateReconciler:ge.a},Te=Object(he.a)(Pe,De),_e=function(){var e=[Ee.applyMiddleware.apply(void 0,[])],t=je.composeWithDevTools.apply(void 0,e),a=Object(Ee.createStore)(Te,t);return{store:a,persistor:Object(he.b)(a)}},Me=a(130),Ae=_e(),Ye=Ae.store,Be=Ae.persistor,Fe=function(e){var t=e.children;return n.createElement(z.a,{store:Ye},n.createElement(Me.PersistGate,{loading:null,persistor:Be},t))};var Ve=function(){return c.a.createElement(Fe,null,c.a.createElement(d,null,c.a.createElement(i.a,null,c.a.createElement(u.a,null,c.a.createElement(s.a,{offsetTop:0},c.a.createElement(pe,null)),c.a.createElement(o.c,null,c.a.createElement(Oe,null,c.a.createElement(o.a,{exact:!0,path:"/",component:ce}),c.a.createElement(o.a,{exact:!0,path:"/active",component:re}),c.a.createElement(o.a,{exact:!0,path:"/deleted",component:le})),c.a.createElement(o.a,{render:function(){return c.a.createElement("div",null,"404 Not Found")}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[141,1,2]]]);
//# sourceMappingURL=main.6eeb2c4b.chunk.js.map